\hypertarget{from__signal_8hpp_source}{}\doxysection{from\+\_\+signal.\+hpp}
\label{from__signal_8hpp_source}\index{src/rppqt/rppqt/sources/from\_signal.hpp@{src/rppqt/rppqt/sources/from\_signal.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//                  ReactivePlusPlus library}}
\DoxyCodeLine{2 \textcolor{comment}{//}}
\DoxyCodeLine{3 \textcolor{comment}{//          Copyright Aleksey Loginov 2022 -\/ present.}}
\DoxyCodeLine{4 \textcolor{comment}{// Distributed under the Boost Software License, Version 1.0.}}
\DoxyCodeLine{5 \textcolor{comment}{//    (See accompanying file LICENSE\_1\_0.txt or copy at}}
\DoxyCodeLine{6 \textcolor{comment}{//          https://www.boost.org/LICENSE\_1\_0.txt)}}
\DoxyCodeLine{7 \textcolor{comment}{//}}
\DoxyCodeLine{8 \textcolor{comment}{// Project home: https://github.com/victimsnino/ReactivePlusPlus}}
\DoxyCodeLine{9 \textcolor{comment}{//}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <QObject>}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <rppqt/sources/fwd.hpp>}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <rpp/subjects/publish\_subject.hpp>}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include <tuple>}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 IMPLEMENTATION\_FILE(from\_signal\_qt\_tag);}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keyword}{namespace }rppqt::observable::details}
\DoxyCodeLine{23 \{}
\DoxyCodeLine{24 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Value>}
\DoxyCodeLine{25 \textcolor{keyword}{struct }\mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event__base}{from\_signal\_on\_event\_base}}}
\DoxyCodeLine{26 \{}
\DoxyCodeLine{27     \textcolor{keyword}{using }\mbox{\hyperlink{classrpp_1_1subjects_1_1publish__subject}{Subject}} = \mbox{\hyperlink{classrpp_1_1subjects_1_1publish__subject}{rpp::subjects::publish\_subject<Value>}};}
\DoxyCodeLine{28     \textcolor{keyword}{using }Subscriber = \textcolor{keyword}{decltype}(std::declval<Subject>().get\_subscriber());}
\DoxyCodeLine{29 }
\DoxyCodeLine{30     \mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event__base}{from\_signal\_on\_event\_base}}(\textcolor{keyword}{const} Subscriber\& subscriber)}
\DoxyCodeLine{31         : subscriber\{subscriber\} \{\}}
\DoxyCodeLine{32 }
\DoxyCodeLine{33     \mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event__base}{from\_signal\_on\_event\_base}}(Subscriber\&\& subscriber)}
\DoxyCodeLine{34         : subscriber\{std::move(subscriber)\} \{\}}
\DoxyCodeLine{35 }
\DoxyCodeLine{36     Subscriber subscriber;}
\DoxyCodeLine{37 \};}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{keyword}{template}<\textcolor{keyword}{typename}... Args>}
\DoxyCodeLine{40 \textcolor{keyword}{struct }\mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event}{from\_signal\_on\_event}} : \mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event__base}{from\_signal\_on\_event\_base}}<std::tuple<std::decay\_t<Args>...>>}
\DoxyCodeLine{41 \{}
\DoxyCodeLine{42     \textcolor{keyword}{template}<\textcolor{keyword}{typename} ...Vals>}
\DoxyCodeLine{43     \textcolor{keywordtype}{void} operator()(Vals\&\&... vals)\textcolor{keyword}{ const}}
\DoxyCodeLine{44 \textcolor{keyword}{    }\{}
\DoxyCodeLine{45         \mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event__base}{from\_signal\_on\_event\_base<std::tuple<std::decay\_t<Args>}}...>>::subscriber.on\_next(std::make\_tuple(std::forward<Vals>(vals)...));}
\DoxyCodeLine{46     \}}
\DoxyCodeLine{47 \};}
\DoxyCodeLine{48 }
\DoxyCodeLine{49 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Arg>}
\DoxyCodeLine{50 \textcolor{keyword}{struct }\mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event}{from\_signal\_on\_event}}<Arg> : \mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event__base}{from\_signal\_on\_event\_base}}<std::decay\_t<Arg>>}
\DoxyCodeLine{51 \{}
\DoxyCodeLine{52     \textcolor{keyword}{template}<rpp::constra\textcolor{keywordtype}{int}::decayed\_same\_as<Arg> Val>}
\DoxyCodeLine{53     \textcolor{keywordtype}{void} operator()(Val\&\& val)\textcolor{keyword}{ const}}
\DoxyCodeLine{54 \textcolor{keyword}{    }\{}
\DoxyCodeLine{55         \mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event__base}{from\_signal\_on\_event\_base<std::decay\_t<Arg>}}>::subscriber.on\_next(std::forward<Val>(val));}
\DoxyCodeLine{56     \}}
\DoxyCodeLine{57 \};}
\DoxyCodeLine{58 }
\DoxyCodeLine{59 \textcolor{keyword}{template}<>}
\DoxyCodeLine{60 \textcolor{keyword}{struct }\mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event}{from\_signal\_on\_event}}<> : \mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event__base}{from\_signal\_on\_event\_base}}<rpp::utils::none>}
\DoxyCodeLine{61 \{}
\DoxyCodeLine{62     \textcolor{keywordtype}{void} operator()()\textcolor{keyword}{ const}}
\DoxyCodeLine{63 \textcolor{keyword}{    }\{}
\DoxyCodeLine{64         subscriber.on\_next(rpp::utils::none\{\});}
\DoxyCodeLine{65     \}}
\DoxyCodeLine{66 \};}
\DoxyCodeLine{67 }
\DoxyCodeLine{68 \}}
\DoxyCodeLine{69 \textcolor{keyword}{namespace }rppqt::observable}
\DoxyCodeLine{70 \{}
\DoxyCodeLine{82 \textcolor{keyword}{template}<std::derived\_from<QObject> TSignalQObject, std::derived\_from<TSignalQObject> TObject, \textcolor{keyword}{typename} R,\textcolor{keyword}{typename} ...Args>}
\DoxyCodeLine{83 \textcolor{keyword}{auto} \mbox{\hyperlink{group__qt__creational__operators_ga4e3140c3f32d2ea4b80b76fdc772278b}{from\_signal}}(\textcolor{keyword}{const} TObject\& \textcolor{keywordtype}{object}, R (TSignalQObject::*signal)(Args...)) \textcolor{keyword}{requires} rpp::details::is\_header\_included<rpp::details::from\_signal\_qt\_tag, TObject, R, Args...>}
\DoxyCodeLine{84 \{}
\DoxyCodeLine{85     \textcolor{keyword}{using }on\_next\_impl = \mbox{\hyperlink{structrppqt_1_1observable_1_1details_1_1from__signal__on__event}{details::from\_signal\_on\_event}}<Args...>;}
\DoxyCodeLine{86     \textcolor{keyword}{const} \textcolor{keyword}{auto} subj = \textcolor{keyword}{typename} on\_next\_impl::Subject\{\};}
\DoxyCodeLine{87 }
\DoxyCodeLine{88     \textcolor{keyword}{const} \textcolor{keyword}{auto} subscriber     = subj.get\_subscriber();}
\DoxyCodeLine{89     QObject::connect(\&\textcolor{keywordtype}{object}, signal, on\_next\_impl\{subscriber\});}
\DoxyCodeLine{90     QObject::connect(\&\textcolor{keywordtype}{object}, \&QObject::destroyed, [subscriber] \{ subscriber.on\_completed(); \});}
\DoxyCodeLine{91 }
\DoxyCodeLine{92     \textcolor{keywordflow}{return} subj.get\_observable();}
\DoxyCodeLine{93 \}}
\DoxyCodeLine{94 \} \textcolor{comment}{// namespace rppqt::observable}}

\end{DoxyCode}
